{% extends "base_index.html" %}

{% load static %}

{% block title %} DASHBOARD {% endblock title %}

{% block main_contents %}

    <!-- Sales Chart Start -->
    <div class="container-fluid pt-3 px-3">
        <div class="row g-3">
            <div class="col-sm-12 col-xl-3 col-lg-3 col-md-4">
                <div class="bg-secondary text-center rounded p-1">
                    <div class="accordion accordion-flush" id="accordionFlushExample" style="height: 86vh;">
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingOne">
                                <button class="accordion-button" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseOne"
                                        aria-expanded="true" aria-controls="flush-collapseOne">
                                    Administrative Boundaries
                                </button>
                            </h2>
                            <div id="flush-collapseOne" class="accordion-collapse collapse show"
                                 aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh; overflow: auto;" id="divAdminLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingTwo">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo"
                                        aria-expanded="false" aria-controls="flush-collapseTwo">
                                    Notified Area
                                </button>
                            </h2>
                            <div id="flush-collapseTwo" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;"
                                     id="divNotifiedAreaLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingThree">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseThree"
                                        aria-expanded="false" aria-controls="flush-collapseThree">
                                    Existing Landuse
                                </button>
                            </h2>
                            <div id="flush-collapseThree" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divExLULayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingFour">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseFour"
                                        aria-expanded="false" aria-controls="flush-collapseFour">
                                    PICIIP Proposals
                                </button>
                            </h2>
                            <div id="flush-collapseFour" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingFour" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divPPLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingFive">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseFive"
                                        aria-expanded="false" aria-controls="flush-collapseFive">
                                    Proposed Zones
                                </button>
                            </h2>
                            <div id="flush-collapseFive" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingFive" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divPZLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingSix">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseSix"
                                        aria-expanded="false" aria-controls="flush-collapseSix">
                                    Residential
                                </button>
                            </h2>
                            <div id="flush-collapseSix" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingSix" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;"
                                     id="divResidentialLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingSeven">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseSeven"
                                        aria-expanded="false" aria-controls="flush-collapseSeven">
                                    Commercial
                                </button>
                            </h2>
                            <div id="flush-collapseSeven" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingSeven" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divCommLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingEight">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseEight"
                                        aria-expanded="false" aria-controls="flush-collapseEight">
                                    Other Landuse
                                </button>
                            </h2>
                            <div id="flush-collapseEight" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingEight" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divOLLayers">

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-transparent">
                            <h2 class="accordion-header" id="flush-headingNine">
                                <button class="accordion-button collapsed" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#flush-collapseNine"
                                        aria-expanded="false" aria-controls="flush-collapseNine">
                                    Base Maps
                                </button>
                            </h2>
                            <div id="flush-collapseNine" class="accordion-collapse collapse"
                                 aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body" style="height: 29vh;overflow: auto;" id="divBasemaps">

                                </div>
                            </div>
                        </div>


                    </div>

                </div>
            </div>
            <div class="col-sm-12 col-xl-9 col-lg-9 col-md-8">
                <div class="bg-secondary text-center rounded p-1">
                    <div id="mapDiv" style="height: 86vh;">

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->

    <!-- Sales Chart Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Buildings Age</h6>
                        <a href="">Residential</a>
                    </div>
                    <canvas id="buildingAgeBarChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Buildings Height</h6>
                        <a href="">Residential</a>
                    </div>
                    <canvas id="buildingHeightBarChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->

    <!-- Sales Chart Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Residential Area</h6>
                        <a href="">Landuse Bars</a>
                    </div>
                    <canvas id="typeBarChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Residential Area</h6>
                        <a href="">Landuse Pie</a>
                    </div>
                    <canvas id="typePieChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->

    <!-- Sales Chart Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Commercial Area</h6>
                        <a href="">Landuse Bars</a>
                    </div>
                    <canvas id="commBarChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Commercial Area</h6>
                        <a href="">Landuse Pie</a>
                    </div>
                    <canvas id="commPieChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->

    <!-- Sales Chart Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Industrial Area</h6>
                        <a href="">Landuse Bars</a>
                    </div>
                    <canvas id="indBarChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Industrial Area</h6>
                        <a href="">Landuse Pie</a>
                    </div>
                    <canvas id="indPieChartDiv" style="max-height: 40vh;"></canvas>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->


{% endblock main_contents %}

{% block extra_styles %}
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
{% endblock extra_styles %}

{% block extra_scripts %}
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="{% static "js/ChartsVM.js" %}"></script>
    <script src="{% static "js/MapVM.js" %}"></script>

    <script type="text/javascript">
        let areaSum = JSON.parse('{{ area_sum|safe }}');
        let lu_area_sum = JSON.parse('{{ lu_area_sum|safe }}');
        console.log(areaSum);

        $(document).ready(function () {
            let mapVM = new MapVM();
            mapVM.initMap();

            let chartVM = new ChartsVM();

            let bAgeChartData = chartVM.getBarChartData(lu_area_sum["building_age_count"], "Age Count", "rgb(235,150,22)", "building_a", "count");
            chartVM.initBarChart(bAgeChartData, "buildingAgeBarChartDiv");

            let bHeightChartData = chartVM.getBarChartData(lu_area_sum["building_height_count"], "Height Count", "rgb(22,235,228)", "b_height", "count");
            chartVM.initBarChart(bHeightChartData, "buildingHeightBarChartDiv");

            let chartData = chartVM.getBarChartData(lu_area_sum["residential_area"], "Area", "rgba(235, 22, 22, 1)", "lu_upd", "area");
            chartVM.initBarChart(chartData, "typeBarChartDiv");

            let pieChartData = chartVM.getPieChartData(lu_area_sum["residential_area"]);
            chartVM.initPieChart(pieChartData, "typePieChartDiv");

            let chartDataComm = chartVM.getBarChartData(lu_area_sum["commercial_area"], "Area", "rgba(22, 235, 22, 1)", "lu_upd", "area");
            chartVM.initBarChart(chartDataComm, "commBarChartDiv");

            let pieChartCommData = chartVM.getPieChartData(lu_area_sum["commercial_area"]);
            chartVM.initPieChart(pieChartCommData, "commPieChartDiv");

            let chartDataInd = chartVM.getBarChartData(lu_area_sum["industry_area"], "Area", "rgba(22, 22, 235, 1)", "lu_upd", "area");
            chartVM.initBarChart(chartDataInd, "indBarChartDiv");

            let pieChartIndData = chartVM.getPieChartData(lu_area_sum["industry_area"]);
            chartVM.initPieChart(pieChartIndData, "indPieChartDiv");


        });

    </script>

{% endblock extra_scripts %}
